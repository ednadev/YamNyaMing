<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="Admin">
	
<insert id="insertAdmin" parameterType="admin">
insert into admin_info_tb values (admin_info_tb_SEQ.NEXTVAL,#{ad_id},#{ad_password},#{ad_nickname},#{ad_grade})  
</insert>


<select id="adminIdCheck" parameterType="admin" resultType="admin">
      SELECT ADMIN_NICKNAME as ad_nickname FROM admin_info_tb
      WHERE ADMIN_ID = #{ad_id}
</select>
	
<select id="allMemberView" parameterType="member" resultType="member">
  SELECT 
  mb_id as memberId,
  mb_name as memberName,
  mb_nickname as memberNickName,
  mb_gender as memberGender,
  mb_birth as memberBirth,
  mb_email as memberEmail,
  mb_phone as memberPhone,
  mb_regDate as memberRegDate,
  MB_UPLOAD_PHOTO_FK as memberAvatar
  from member_entire_tb
</select>

<select id="allOwnerView" parameterType="owner" resultType="owner">
  SELECT 
  OW_ID as owId,
  OW_NAME as owName,
  OW_EMAIL as owEmail,
  OW_PHONE as phone,
  OW_REGDATE as owRegDate,
  OW_BANK_ACCOUNT as owBankAccount
  from OWNER_ENTIRE_TB
</select>


<select id="OwnerSearch" parameterType="map" resultType="owner">
SELECT  
  OW_ID as owId,
  OW_NAME as owName,
  OW_EMAIL as owEmail,
  OW_PHONE as phone,
  OW_REGDATE as owRegDate,
  OW_BANK_ACCOUNT as owBankAccount 
  FROM OWNER_ENTIRE_TB
  <where>
 <choose>
 <when test="combo == 'OwnerName'">
 OW_NAME LIKE '%'|| #{keyword} ||'%' 
  </when>
  
 <otherwise>
 OW_ID LIKE '%'|| #{keyword} ||'%' 
  </otherwise>
  
  </choose>
  </where>
</select>

<select id="MemberSearch" parameterType="map" resultType="member"> 
  SELECT 
  mb_id as memberId,
  mb_name as memberName,
  mb_nickname as memberNickName,
  mb_gender as memberGender,
  mb_birth as memberBirth,
  mb_email as memberEmail,
  mb_phone as memberPhone,
  mb_regDate as memberRegDate,
  MB_UPLOAD_PHOTO_FK as memberAvatar
  from member_entire_tb 
  where
 <choose>
 
 <when test="combo == 'MemberName'">
 MB_NAME LIKE '%'|| #{Keyword} ||'%' 

 </when>
  
 <when test="combo == 'MemberNickName'">
 MB_NICKNAME LIKE '%'|| #{Keyword} ||'%' 
 </when>
  
 <otherwise>
 MB_ID LIKE '%'|| #{Keyword} ||'%' 
 </otherwise>
</choose>


</select>


<select id="adminLogin" parameterType="admin" resultType="admin">
      SELECT 
      ADMIN_INFO_PK as admin_info_pk,
      ADMIN_ID as ad_id,
      ADMIN_PASSWORD as ad_password,
      ADMIN_NICKNAME as ad_nickname,
      ADMIN_ACCESS_GRADE_FK as ad_grade
      from admin_info_tb 
      where ADMIN_ID = #{ad_id} and ADMIN_PASSWORD = #{ad_password}
</select>

</mapper>
