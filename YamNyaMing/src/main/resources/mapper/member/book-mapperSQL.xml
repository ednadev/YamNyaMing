<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="book">
	<!-- 예약 정보 쿼리 -->
	
	<insert id="bookInfo">
		insert into member_book_tb values(member_book_tb_SEQ.nextval,#{memberEntireNo},#{storeEntireNo},
																		sysdate,#{bookOrderCount},#{bookPartyCount},
																		#{bookType},#{bookOption},'w',#{bookDeposit},
																		(TO_DATE(#{bookDateAndTime2},'yyyy/mm/dd hh24:mi')))
	</insert>
	
	
	<!--To_char(mb_regDate,'YYYY-MM-DD HH24:MI:SS') -->
	
	<select id="bookCheck" resultType="books">
		select 
		
		
		from member_book_tb m,owner_store_info_tb o
		 
		 where m.ow_entire_fk=o.ow_entire_fk and mb_entire_fk=#{memberEntireNo}
		
	</select>
	
	<select id="myBookCheck" resultType="int">
		select 
            STORE_ENTIRE_FK
		from member_book_tb m, owner_store_info_tb o
		where STORE_ENTIRE_FK = #{storeIndex} and MB_BOOK_STATE in ('w', 'r'); 
	</select>
	
	<select id="myBookStoreIndex" resultType="books">
		select 
			MB_BOOK_PK as bookNo,
			MB_ENTIRE_FK as 
            STORE_ENTIRE_FK as 
            MB_BOOK_DATE as 
            MB_BOOK_ORDER_COUNT as 
            MB_BOOK_PARTY_COUNT
            MB_BOOK_TYPE as 
            MB_BOOK_OPTION as 
            MB_BOOK_STATE as 
            MB_BOOK_DEPOSIT as 
            MB_BOOK_DATE_TIME as 
		from member_book_tb
		where mb_book_pk = #{memberIndex} and MB_BOOK_STATE in ('w', 'r')
		and MB_BOOK_DATE_TIME > sysdate 
	</select>


</mapper>