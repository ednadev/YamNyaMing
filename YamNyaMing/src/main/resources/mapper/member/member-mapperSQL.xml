<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="member">

<!-- 사용자 정보 쿼리 -->

	<insert id="signUpMember" parameterType="members">
		insert into member_entire_tb values(member_entire_tb_SEQ.nextval,#{memberId},#{memberPw},#{memberName},
											#{memberNickName},#{memberGender},#{memberBirth},#{memberEmail},#{memberPhone},
											sysdate,#{memberUploadPhotoNo})
	</insert>
	
	<select id="selectOneMember" resultType="members">
		select 
			mb_entire_pk as memberEntireNo,
			mb_id as memberId,
			mb_pw as memberPw,
			mb_name as memberName,
			mb_nickname as memberNickName,
			mb_gender as memberGender,
			mb_birth as memberBirth,
			mb_email as memberEmail,
			mb_phone as memberPhone,
			mb_regdate as memberRegDate,
			mb_upload_photo_fk as memberUploadPhotoNo
			from member_entire_tb
			
			where mb_id=#{memberId} and mb_pw=#{memberPw}
			
	</select>
	
	<select id="memberInfo" resultType="memberCheck">
			select 
			mb_entire_pk as memberEntireNo,
			mb_id as memberId,
			mb_pw as memberPw,
			mb_name as memberName,
			mb_nickname as memberNickName,
			mb_gender as memberGender,
			mb_birth as memberBirth,
			mb_email as memberEmail,
			mb_phone as memberPhone,
			mb_regdate as memberRegDate,
			mb_upload_photo_fk as memberUploadPhotoNo,
			mb_photo_view_route as photoViewRoute
	
			from member_upload_photo_tb p, member_entire_tb e
			where p.mb_upload_photo_pk=e.mb_upload_photo_fk and mb_id=#{memberId} and mb_pw=#{memberPw}
	</select>
	
	<delete id="deleteMember">
		delete from member_entire_tb where mb_id=#{memberId} and mb_pw=#{memberPw}
	</delete>
	
	<update id="updateMember">
		update member_entire_tb set mb_nickname=#{memberNickName}, 
											mb_email=#{memberEmail}
		where mb_entire_pk=#{memberEntireNo}
											
	</update>

	
	<select id="idCheck" resultType="members">
	select 
			mb_id as memberId
	from member_entire_tb
	where mb_id=#{memberId}
	
	</select>
	
	<select id="nickCheck" resultType="members">
	select 
			mb_nickname as memberNickName
	from member_entire_tb
	where mb_nickname=#{memberNickName}
	
	</select>
	
	
	<select id="selectOneStore" resultType="storeInfo">
		select ow_store_phone as owStorePhone
		from owner_store_info_tb
		where ow_store_info_pk=#{ownerStoreEntireNo}
	</select>
	
	

</mapper>